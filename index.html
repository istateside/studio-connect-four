<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title></title>
  </head>
  <body>
    <script>
document.addEventListener('DOMContentLoaded', function() {
  const columnIdx = CD.param('column_id') || MI.options.colIdx;
  const gameIdx = CD.param('game_id') || MI.options.gameIdx;

  CD.getCORS(`https://miconnectfour.localtunnel.me?game_id=${gameIdx}`, function(gameData) {
    if (gameData && gameData !== 'Request Failed') {
      console.log('we got data');
      fillRows(gameData);
    } else {
      console.log('No game data found');
    }
  });


  function fillRows(gameData) {
    gameData = JSON.parse(gameData);
    const columnData = gameData[`col_${columnIdx}`];
    const rowElements = document.querySelectorAll('.tool-game-space');

    if (!columnData.Valid) {
      return;
    }

    const rows = columnData.String.replace(/{|}/g, '').split(',');
console.log(rows);
    for (const row of rowElements) {
      const attrs = Studio.attributesForTag(row.getAttribute('mi-tag'));
      const rowIdx = attrs.toolProperties.rowIdx;
      const player = rows[rowIdx - 1];

      fillRow(row, player)
    }
  }

  function fillRow(element, player) {
    if (player === '0') {
      element.style.backgroundColor = 'red';
    } else if (player === '1') {
      element.style.backgroundColor = 'yellow';
    }
  }
});
    </script>

    <!-- MI WYSIWYG: DO NOT MODIFY CODE BEYOND THIS POINT. This code is auto-generated by Studio and will be overwritten -->

<div class='mi-layer-container' id='mi_size_container' width='100' height='600' style='width: 100px; height: 600px; position: relative;'>
      <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 5px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 282; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="3854591383748496" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 105px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 273; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="35255738746092224" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 205px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 263; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="43091447800863136" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 305px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 142; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="7458549091902578" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 405px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 133; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="5071716672217179" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-game-space rectangle static " style="top: 505px; left: 5px; color: #000000; width: 90px; border-radius: 45px; border-color: #C9C00C; border-style: solid; border-width: 5px; box-sizing: border-box; height: 90px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 114; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 255, 255); transform-origin: 45px 45px; -webkit-transform-origin: 45px 45px; opacity: 1;" mi-type="rectangle" mi-tag="2226387895293802" source-index="0"></div>
    <div class="mi-layer type-rectangle tool-box static " style="top: -15px; left: -13px; color: #000000; width: 122px; border-radius: 0px; border-color: #000000; border-style: none; border-width: 0px; box-sizing: border-box; height: 624px; margin-top: 0px; margin-left: 0px; margin-bottom: 0px; margin-right: 0px; z-index: 76; font-size: 30px; position: absolute; text-align: left; transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; -webkit-transform: rotate(0deg) translateX(0px) translateX(0px) translateY(0px) !important; text-shadow: none; line-height: 1; font-family: 'Helvetica'; font-weight: 400; text-transform: none; letter-spacing: 0px; background-color: rgb(255, 238, 71); transform-origin: 61px 312px; -webkit-transform-origin: 61px 312px; opacity: 1;" mi-type="rectangle" mi-tag="04279163671337538" source-index="0"></div>
</div>

<div style='display: none;' class='mi-attributes'>[{"id":"3854591383748496","type":"rectangle","text":"","label":"Game Space 6","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"6"},"minimumFontSize":0,"advancedOptions":{},"top":5,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":282,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"35255738746092224","type":"rectangle","text":"","label":"Game Space 5","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"5"},"minimumFontSize":0,"advancedOptions":{},"top":105,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":273,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"43091447800863136","type":"rectangle","text":"","label":"Game Space 4","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"4"},"minimumFontSize":0,"advancedOptions":{},"top":205,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":263,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"7458549091902578","type":"rectangle","text":"","label":"Game Space 3","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"3"},"minimumFontSize":0,"advancedOptions":{},"top":305,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":142,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"5071716672217179","type":"rectangle","text":"","label":"Game Space 2","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"2"},"minimumFontSize":0,"advancedOptions":{},"top":405,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":133,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"2226387895293802","type":"rectangle","text":"","label":"Game Space 1","locked":false,"imageUrl":"","toolName":"Game Space","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{"rowIdx":"1"},"minimumFontSize":0,"advancedOptions":{},"top":505,"left":5,"color":"#000000","width":90,"borderRadius":45,"borderColor":"#C9C00C","borderStyle":"solid","borderWidth":"5","boxSizing":"border-box","height":90,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":114,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 255, 255)","transformOrigin":"45px 45px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null},{"id":"04279163671337538","type":"rectangle","text":"","label":"Background","locked":false,"imageUrl":"","toolName":"box","dataType":"static","autoresize":false,"classNames":"","childLayout":"absolute","previewText":"","sourceIndex":0,"fallbackText":"","toolProperties":{},"minimumFontSize":0,"advancedOptions":{},"top":-15,"left":-13,"color":"#000000","width":122,"borderRadius":0,"borderColor":"#000000","borderStyle":"none","borderWidth":0,"boxSizing":"border-box","height":624,"marginTop":0,"marginLeft":0,"marginBottom":0,"marginRight":0,"zIndex":76,"fontSize":30,"position":"absolute","textAlign":"left","transform":0,"textShadow":"none","lineHeight":1,"fontFamily":"Helvetica","fontWeight":400,"textTransform":"none","letterSpacing":0,"backgroundColor":"rgb(255, 238, 71)","transformOrigin":"61px 312px","groupOffset":{"offsetX":0,"offsetY":0},"opacity":1,"overflow":null}]</div>
<!-- END MI WYSIWYG -->

  </body>
</html>
